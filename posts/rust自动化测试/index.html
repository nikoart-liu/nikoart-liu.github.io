<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Rust - 自动化测试 | Spicy Bits</title><meta name=keywords content="Rust,编程语言"><meta name=description content='Rust - 自动化测试
知识概览

核心主题：Rust 内置测试框架、单元测试、集成测试
重要性：⭐⭐⭐⭐ 掌握测试是工程化开发的基础
前置知识：泛型与 Trait（第10章）、所有权（第4章）

核心概念
测试框架架构
Rust 内置测试框架，无需外部依赖，通过 #[test] 属性标记测试函数。
#[cfg(test)]  // 仅在测试时编译
mod tests {
    use super::*;  // 访问被测试模块

    #[test]
    fn it_works() {
        assert_eq!(2 + 2, 4);
        assert!(true);
    }

    #[test]
    #[should_panic(expected = "错误信息")]
    fn it_panics() {
        panic!("错误信息");
    }
}
断言宏

  
      
          宏
          用途
          示例
      
  
  
      
          assert!(cond)
          条件为真
          assert!(x > 0)
      
      
          assert_eq!(a, b)
          两值相等
          assert_eq!(result, 5)
      
      
          assert_ne!(a, b)
          两值不等
          assert_ne!(result, 0)
      
  

测试组织方式

单元测试：同文件 mod tests 内
集成测试：tests/ 目录下的独立文件
文档测试：doc comment /// 中的代码示例

常用派生 trait
#[derive(Debug, Clone, PartialEq)]
pub struct Rectangle {
    pub width: u32,
    pub height: u32,
}

  
      
          trait
          作用
      
  
  
      
          Debug
          支持 {:?} 打印
      
      
          Clone
          支持 .clone() 克隆
      
      
          PartialEq
          支持 = 比较
      
  

实践项目
Rectangle 结构体测试
#[derive(Debug)]
pub struct Rectangle {
    pub width: u32,
    pub height: u32,
}

impl Rectangle {
    pub fn can_hold(&amp;self, other: &amp;Rectangle) -> bool {
        self.width >= other.width && self.height >= other.height
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn larger_can_hold_smaller() {
        let larger = Rectangle { width: 8, height: 7 };
        let smaller = Rectangle { width: 5, height: 1 };
        assert!(larger.can_hold(&amp;smaller));
    }

    #[test]
    fn smaller_cannot_hold_larger() {
        let larger = Rectangle { width: 4, height: 7 };
        let smaller = Rectangle { width: 5, height: 1 };
        assert!(!larger.can_hold(&amp;smaller));
    }
}
常见陷阱

  
      
          问题
          原因
          解决方案
      
  
  
      
          字段不可访问
          字段默认私有
          pub struct 或公开字段
      
      
          所有权转移
          参数为 Rectangle 而非 &amp;Rectangle
          使用借用 &amp;Rectangle
      
      
          调试打印失败
          未派生 Debug
          添加 #[derive(Debug)]
      
  

运行测试
cargo test        # 运行所有测试
cargo test test_name  # 运行指定测试
关键要点

#[cfg(test)] 仅在测试时编译
#[test] 标记测试函数
#[should_panic] 预期 panic
用 &amp;Rectangle 借用避免所有权转移
#[derive(Debug)] 支持调试打印
'><meta name=author content="nikoart"><link rel=canonical href=https://nikoart-liu.github.io/posts/rust%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://nikoart-liu.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nikoart-liu.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nikoart-liu.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://nikoart-liu.github.io/apple-touch-icon.png><link rel=mask-icon href=https://nikoart-liu.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://nikoart-liu.github.io/posts/rust%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://nikoart-liu.github.io/posts/rust%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"><meta property="og:site_name" content="Spicy Bits"><meta property="og:title" content="Rust - 自动化测试"><meta property="og:description" content='Rust - 自动化测试 知识概览 核心主题：Rust 内置测试框架、单元测试、集成测试 重要性：⭐⭐⭐⭐ 掌握测试是工程化开发的基础 前置知识：泛型与 Trait（第10章）、所有权（第4章） 核心概念 测试框架架构 Rust 内置测试框架，无需外部依赖，通过 #[test] 属性标记测试函数。
#[cfg(test)] // 仅在测试时编译 mod tests { use super::*; // 访问被测试模块 #[test] fn it_works() { assert_eq!(2 + 2, 4); assert!(true); } #[test] #[should_panic(expected = "错误信息")] fn it_panics() { panic!("错误信息"); } } 断言宏 宏 用途 示例 assert!(cond) 条件为真 assert!(x > 0) assert_eq!(a, b) 两值相等 assert_eq!(result, 5) assert_ne!(a, b) 两值不等 assert_ne!(result, 0) 测试组织方式 单元测试：同文件 mod tests 内 集成测试：tests/ 目录下的独立文件 文档测试：doc comment /// 中的代码示例 常用派生 trait #[derive(Debug, Clone, PartialEq)] pub struct Rectangle { pub width: u32, pub height: u32, } trait 作用 Debug 支持 {:?} 打印 Clone 支持 .clone() 克隆 PartialEq 支持 = 比较 实践项目 Rectangle 结构体测试 #[derive(Debug)] pub struct Rectangle { pub width: u32, pub height: u32, } impl Rectangle { pub fn can_hold(&amp;self, other: &amp;Rectangle) -> bool { self.width >= other.width && self.height >= other.height } } #[cfg(test)] mod tests { use super::*; #[test] fn larger_can_hold_smaller() { let larger = Rectangle { width: 8, height: 7 }; let smaller = Rectangle { width: 5, height: 1 }; assert!(larger.can_hold(&amp;smaller)); } #[test] fn smaller_cannot_hold_larger() { let larger = Rectangle { width: 4, height: 7 }; let smaller = Rectangle { width: 5, height: 1 }; assert!(!larger.can_hold(&amp;smaller)); } } 常见陷阱 问题 原因 解决方案 字段不可访问 字段默认私有 pub struct 或公开字段 所有权转移 参数为 Rectangle 而非 &amp;Rectangle 使用借用 &amp;Rectangle 调试打印失败 未派生 Debug 添加 #[derive(Debug)] 运行测试 cargo test # 运行所有测试 cargo test test_name # 运行指定测试 关键要点 #[cfg(test)] 仅在测试时编译 #[test] 标记测试函数 #[should_panic] 预期 panic 用 &amp;Rectangle 借用避免所有权转移 #[derive(Debug)] 支持调试打印 '><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-29T14:49:23+08:00"><meta property="article:modified_time" content="2026-01-29T14:49:23+08:00"><meta property="article:tag" content="Rust"><meta property="article:tag" content="编程语言"><meta name=twitter:card content="summary"><meta name=twitter:title content="Rust - 自动化测试"><meta name=twitter:description content='Rust - 自动化测试
知识概览

核心主题：Rust 内置测试框架、单元测试、集成测试
重要性：⭐⭐⭐⭐ 掌握测试是工程化开发的基础
前置知识：泛型与 Trait（第10章）、所有权（第4章）

核心概念
测试框架架构
Rust 内置测试框架，无需外部依赖，通过 #[test] 属性标记测试函数。
#[cfg(test)]  // 仅在测试时编译
mod tests {
    use super::*;  // 访问被测试模块

    #[test]
    fn it_works() {
        assert_eq!(2 + 2, 4);
        assert!(true);
    }

    #[test]
    #[should_panic(expected = "错误信息")]
    fn it_panics() {
        panic!("错误信息");
    }
}
断言宏

  
      
          宏
          用途
          示例
      
  
  
      
          assert!(cond)
          条件为真
          assert!(x > 0)
      
      
          assert_eq!(a, b)
          两值相等
          assert_eq!(result, 5)
      
      
          assert_ne!(a, b)
          两值不等
          assert_ne!(result, 0)
      
  

测试组织方式

单元测试：同文件 mod tests 内
集成测试：tests/ 目录下的独立文件
文档测试：doc comment /// 中的代码示例

常用派生 trait
#[derive(Debug, Clone, PartialEq)]
pub struct Rectangle {
    pub width: u32,
    pub height: u32,
}

  
      
          trait
          作用
      
  
  
      
          Debug
          支持 {:?} 打印
      
      
          Clone
          支持 .clone() 克隆
      
      
          PartialEq
          支持 = 比较
      
  

实践项目
Rectangle 结构体测试
#[derive(Debug)]
pub struct Rectangle {
    pub width: u32,
    pub height: u32,
}

impl Rectangle {
    pub fn can_hold(&amp;self, other: &amp;Rectangle) -> bool {
        self.width >= other.width && self.height >= other.height
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn larger_can_hold_smaller() {
        let larger = Rectangle { width: 8, height: 7 };
        let smaller = Rectangle { width: 5, height: 1 };
        assert!(larger.can_hold(&amp;smaller));
    }

    #[test]
    fn smaller_cannot_hold_larger() {
        let larger = Rectangle { width: 4, height: 7 };
        let smaller = Rectangle { width: 5, height: 1 };
        assert!(!larger.can_hold(&amp;smaller));
    }
}
常见陷阱

  
      
          问题
          原因
          解决方案
      
  
  
      
          字段不可访问
          字段默认私有
          pub struct 或公开字段
      
      
          所有权转移
          参数为 Rectangle 而非 &amp;Rectangle
          使用借用 &amp;Rectangle
      
      
          调试打印失败
          未派生 Debug
          添加 #[derive(Debug)]
      
  

运行测试
cargo test        # 运行所有测试
cargo test test_name  # 运行指定测试
关键要点

#[cfg(test)] 仅在测试时编译
#[test] 标记测试函数
#[should_panic] 预期 panic
用 &amp;Rectangle 借用避免所有权转移
#[derive(Debug)] 支持调试打印
'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://nikoart-liu.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Rust - 自动化测试","item":"https://nikoart-liu.github.io/posts/rust%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Rust - 自动化测试","name":"Rust - 自动化测试","description":"Rust - 自动化测试 知识概览 核心主题：Rust 内置测试框架、单元测试、集成测试 重要性：⭐⭐⭐⭐ 掌握测试是工程化开发的基础 前置知识：泛型与 Trait（第10章）、所有权（第4章） 核心概念 测试框架架构 Rust 内置测试框架，无需外部依赖，通过 #[test] 属性标记测试函数。\n#[cfg(test)] // 仅在测试时编译 mod tests { use super::*; // 访问被测试模块 #[test] fn it_works() { assert_eq!(2 + 2, 4); assert!(true); } #[test] #[should_panic(expected = \u0026#34;错误信息\u0026#34;)] fn it_panics() { panic!(\u0026#34;错误信息\u0026#34;); } } 断言宏 宏 用途 示例 assert!(cond) 条件为真 assert!(x \u0026gt; 0) assert_eq!(a, b) 两值相等 assert_eq!(result, 5) assert_ne!(a, b) 两值不等 assert_ne!(result, 0) 测试组织方式 单元测试：同文件 mod tests 内 集成测试：tests/ 目录下的独立文件 文档测试：doc comment /// 中的代码示例 常用派生 trait #[derive(Debug, Clone, PartialEq)] pub struct Rectangle { pub width: u32, pub height: u32, } trait 作用 Debug 支持 {:?} 打印 Clone 支持 .clone() 克隆 PartialEq 支持 = 比较 实践项目 Rectangle 结构体测试 #[derive(Debug)] pub struct Rectangle { pub width: u32, pub height: u32, } impl Rectangle { pub fn can_hold(\u0026amp;self, other: \u0026amp;Rectangle) -\u0026gt; bool { self.width \u0026gt;= other.width \u0026amp;\u0026amp; self.height \u0026gt;= other.height } } #[cfg(test)] mod tests { use super::*; #[test] fn larger_can_hold_smaller() { let larger = Rectangle { width: 8, height: 7 }; let smaller = Rectangle { width: 5, height: 1 }; assert!(larger.can_hold(\u0026amp;smaller)); } #[test] fn smaller_cannot_hold_larger() { let larger = Rectangle { width: 4, height: 7 }; let smaller = Rectangle { width: 5, height: 1 }; assert!(!larger.can_hold(\u0026amp;smaller)); } } 常见陷阱 问题 原因 解决方案 字段不可访问 字段默认私有 pub struct 或公开字段 所有权转移 参数为 Rectangle 而非 \u0026amp;Rectangle 使用借用 \u0026amp;Rectangle 调试打印失败 未派生 Debug 添加 #[derive(Debug)] 运行测试 cargo test # 运行所有测试 cargo test test_name # 运行指定测试 关键要点 #[cfg(test)] 仅在测试时编译 #[test] 标记测试函数 #[should_panic] 预期 panic 用 \u0026amp;Rectangle 借用避免所有权转移 #[derive(Debug)] 支持调试打印 ","keywords":["Rust","编程语言"],"articleBody":"Rust - 自动化测试 知识概览 核心主题：Rust 内置测试框架、单元测试、集成测试 重要性：⭐⭐⭐⭐ 掌握测试是工程化开发的基础 前置知识：泛型与 Trait（第10章）、所有权（第4章） 核心概念 测试框架架构 Rust 内置测试框架，无需外部依赖，通过 #[test] 属性标记测试函数。\n#[cfg(test)] // 仅在测试时编译 mod tests { use super::*; // 访问被测试模块 #[test] fn it_works() { assert_eq!(2 + 2, 4); assert!(true); } #[test] #[should_panic(expected = \"错误信息\")] fn it_panics() { panic!(\"错误信息\"); } } 断言宏 宏 用途 示例 assert!(cond) 条件为真 assert!(x \u003e 0) assert_eq!(a, b) 两值相等 assert_eq!(result, 5) assert_ne!(a, b) 两值不等 assert_ne!(result, 0) 测试组织方式 单元测试：同文件 mod tests 内 集成测试：tests/ 目录下的独立文件 文档测试：doc comment /// 中的代码示例 常用派生 trait #[derive(Debug, Clone, PartialEq)] pub struct Rectangle { pub width: u32, pub height: u32, } trait 作用 Debug 支持 {:?} 打印 Clone 支持 .clone() 克隆 PartialEq 支持 = 比较 实践项目 Rectangle 结构体测试 #[derive(Debug)] pub struct Rectangle { pub width: u32, pub height: u32, } impl Rectangle { pub fn can_hold(\u0026self, other: \u0026Rectangle) -\u003e bool { self.width \u003e= other.width \u0026\u0026 self.height \u003e= other.height } } #[cfg(test)] mod tests { use super::*; #[test] fn larger_can_hold_smaller() { let larger = Rectangle { width: 8, height: 7 }; let smaller = Rectangle { width: 5, height: 1 }; assert!(larger.can_hold(\u0026smaller)); } #[test] fn smaller_cannot_hold_larger() { let larger = Rectangle { width: 4, height: 7 }; let smaller = Rectangle { width: 5, height: 1 }; assert!(!larger.can_hold(\u0026smaller)); } } 常见陷阱 问题 原因 解决方案 字段不可访问 字段默认私有 pub struct 或公开字段 所有权转移 参数为 Rectangle 而非 \u0026Rectangle 使用借用 \u0026Rectangle 调试打印失败 未派生 Debug 添加 #[derive(Debug)] 运行测试 cargo test # 运行所有测试 cargo test test_name # 运行指定测试 关键要点 #[cfg(test)] 仅在测试时编译 #[test] 标记测试函数 #[should_panic] 预期 panic 用 \u0026Rectangle 借用避免所有权转移 #[derive(Debug)] 支持调试打印 ","wordCount":"244","inLanguage":"en","datePublished":"2026-01-29T14:49:23+08:00","dateModified":"2026-01-29T14:49:23+08:00","author":{"@type":"Person","name":"nikoart"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nikoart-liu.github.io/posts/rust%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"},"publisher":{"@type":"Organization","name":"Spicy Bits","logo":{"@type":"ImageObject","url":"https://nikoart-liu.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://nikoart-liu.github.io/ accesskey=h title="Spicy Bits (Alt + H)">Spicy Bits</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nikoart-liu.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://nikoart-liu.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://nikoart-liu.github.io/tags/ title=标签><span>标签</span></a></li><li><a href=https://nikoart-liu.github.io/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://nikoart-liu.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://nikoart-liu.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Rust - 自动化测试</h1><div class=post-meta><span title='2026-01-29 14:49:23 +0800 +0800'>January 29, 2026</span>&nbsp;·&nbsp;<span>2 min</span>&nbsp;·&nbsp;<span>244 words</span>&nbsp;·&nbsp;<span>nikoart</span></div></header><div class=post-content><h1 id=rust---自动化测试>Rust - 自动化测试<a hidden class=anchor aria-hidden=true href=#rust---自动化测试>#</a></h1><h2 id=知识概览>知识概览<a hidden class=anchor aria-hidden=true href=#知识概览>#</a></h2><ul><li><strong>核心主题</strong>：Rust 内置测试框架、单元测试、集成测试</li><li><strong>重要性</strong>：⭐⭐⭐⭐ 掌握测试是工程化开发的基础</li><li><strong>前置知识</strong>：泛型与 Trait（第10章）、所有权（第4章）</li></ul><h2 id=核心概念>核心概念<a hidden class=anchor aria-hidden=true href=#核心概念>#</a></h2><h3 id=测试框架架构>测试框架架构<a hidden class=anchor aria-hidden=true href=#测试框架架构>#</a></h3><p>Rust 内置测试框架，无需外部依赖，通过 <code>#[test]</code> 属性标记测试函数。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[cfg(test)]</span>  <span style=color:#75715e>// 仅在测试时编译
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>mod</span> tests {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>use</span> <span style=color:#66d9ef>super</span>::<span style=color:#f92672>*</span>;  <span style=color:#75715e>// 访问被测试模块
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[test]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>it_works</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>assert_eq!</span>(<span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>assert!</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[test]</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[should_panic(expected = </span><span style=color:#e6db74>&#34;错误信息&#34;</span><span style=color:#75715e>)]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>it_panics</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>panic!</span>(<span style=color:#e6db74>&#34;错误信息&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=断言宏>断言宏<a hidden class=anchor aria-hidden=true href=#断言宏>#</a></h3><table><thead><tr><th>宏</th><th>用途</th><th>示例</th></tr></thead><tbody><tr><td><code>assert!(cond)</code></td><td>条件为真</td><td><code>assert!(x > 0)</code></td></tr><tr><td><code>assert_eq!(a, b)</code></td><td>两值相等</td><td><code>assert_eq!(result, 5)</code></td></tr><tr><td><code>assert_ne!(a, b)</code></td><td>两值不等</td><td><code>assert_ne!(result, 0)</code></td></tr></tbody></table><h3 id=测试组织方式>测试组织方式<a hidden class=anchor aria-hidden=true href=#测试组织方式>#</a></h3><ol><li><strong>单元测试</strong>：同文件 <code>mod tests</code> 内</li><li><strong>集成测试</strong>：<code>tests/</code> 目录下的独立文件</li><li><strong>文档测试</strong>：doc comment <code>///</code> 中的代码示例</li></ol><h3 id=常用派生-trait>常用派生 trait<a hidden class=anchor aria-hidden=true href=#常用派生-trait>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[derive(Debug, Clone, PartialEq)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Rectangle</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> width: <span style=color:#66d9ef>u32</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> height: <span style=color:#66d9ef>u32</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><table><thead><tr><th>trait</th><th>作用</th></tr></thead><tbody><tr><td><code>Debug</code></td><td>支持 <code>{:?}</code> 打印</td></tr><tr><td><code>Clone</code></td><td>支持 <code>.clone()</code> 克隆</td></tr><tr><td><code>PartialEq</code></td><td>支持 <code>=</code> 比较</td></tr></tbody></table><h2 id=实践项目>实践项目<a hidden class=anchor aria-hidden=true href=#实践项目>#</a></h2><h3 id=rectangle-结构体测试>Rectangle 结构体测试<a hidden class=anchor aria-hidden=true href=#rectangle-结构体测试>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[derive(Debug)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Rectangle</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> width: <span style=color:#66d9ef>u32</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> height: <span style=color:#66d9ef>u32</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> Rectangle {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>can_hold</span>(<span style=color:#f92672>&amp;</span>self, other: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Rectangle</span>) -&gt; <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>        self.width <span style=color:#f92672>&gt;=</span> other.width <span style=color:#f92672>&amp;&amp;</span> self.height <span style=color:#f92672>&gt;=</span> other.height
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#[cfg(test)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mod</span> tests {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>use</span> <span style=color:#66d9ef>super</span>::<span style=color:#f92672>*</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[test]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>larger_can_hold_smaller</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> larger <span style=color:#f92672>=</span> Rectangle { width: <span style=color:#ae81ff>8</span>, height: <span style=color:#ae81ff>7</span> };
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> smaller <span style=color:#f92672>=</span> Rectangle { width: <span style=color:#ae81ff>5</span>, height: <span style=color:#ae81ff>1</span> };
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>assert!</span>(larger.can_hold(<span style=color:#f92672>&amp;</span>smaller));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[test]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>smaller_cannot_hold_larger</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> larger <span style=color:#f92672>=</span> Rectangle { width: <span style=color:#ae81ff>4</span>, height: <span style=color:#ae81ff>7</span> };
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> smaller <span style=color:#f92672>=</span> Rectangle { width: <span style=color:#ae81ff>5</span>, height: <span style=color:#ae81ff>1</span> };
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>assert!</span>(<span style=color:#f92672>!</span>larger.can_hold(<span style=color:#f92672>&amp;</span>smaller));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=常见陷阱>常见陷阱<a hidden class=anchor aria-hidden=true href=#常见陷阱>#</a></h2><table><thead><tr><th>问题</th><th>原因</th><th>解决方案</th></tr></thead><tbody><tr><td>字段不可访问</td><td>字段默认私有</td><td><code>pub struct</code> 或公开字段</td></tr><tr><td>所有权转移</td><td>参数为 <code>Rectangle</code> 而非 <code>&amp;Rectangle</code></td><td>使用借用 <code>&amp;Rectangle</code></td></tr><tr><td>调试打印失败</td><td>未派生 <code>Debug</code></td><td>添加 <code>#[derive(Debug)]</code></td></tr></tbody></table><h2 id=运行测试>运行测试<a hidden class=anchor aria-hidden=true href=#运行测试>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cargo test        <span style=color:#75715e># 运行所有测试</span>
</span></span><span style=display:flex><span>cargo test test_name  <span style=color:#75715e># 运行指定测试</span>
</span></span></code></pre></div><h2 id=关键要点>关键要点<a hidden class=anchor aria-hidden=true href=#关键要点>#</a></h2><ol><li><code>#[cfg(test)]</code> 仅在测试时编译</li><li><code>#[test]</code> 标记测试函数</li><li><code>#[should_panic]</code> 预期 panic</li><li>用 <code>&amp;Rectangle</code> 借用避免所有权转移</li><li><code>#[derive(Debug)]</code> 支持调试打印</li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://nikoart-liu.github.io/tags/rust/>Rust</a></li><li><a href=https://nikoart-liu.github.io/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/>编程语言</a></li></ul><nav class=paginav><a class=prev href=https://nikoart-liu.github.io/posts/rustio/><span class=title>« Prev</span><br><span>Rust - IO</span>
</a><a class=next href=https://nikoart-liu.github.io/posts/rust%E6%B3%9B%E5%9E%8Btrait%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/><span class=title>Next »</span><br><span>Rust - 泛型、Trait 和生命周期</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://nikoart-liu.github.io/>Spicy Bits</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>